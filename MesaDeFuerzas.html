<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Mesa de Fuerzas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .vector-arrow {
            stroke-width: 3;
            marker-end: url(#arrowhead);
        }
        .resultant-arrow {
            stroke-width: 4;
            marker-end: url(#arrowhead-resultant);
        }
        .grid-line {
            stroke: #e5e7eb;
            stroke-width: 1;
        }
        .axis-line {
            stroke: #374151;
            stroke-width: 2;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-200 via-pink-100 via-blue-100 to-indigo-200 min-h-screen p-4 animate-gradient-x" style="background-size: 400% 400%; animation: gradient 15s ease infinite;">
    <style>
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
    <div class="max-w-6xl mx-auto">
        <h1 class="text-5xl font-bold text-center bg-gradient-to-r from-purple-600 via-pink-600 to-indigo-600 bg-clip-text text-transparent mb-8 drop-shadow-lg">üî¨ Simulador de Mesa de Fuerzas</h1>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Panel de Control -->
            <div class="bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 rounded-xl shadow-2xl border-2 border-blue-700 p-6 backdrop-blur-sm">
                <h2 class="text-2xl font-semibold text-white mb-4">‚öôÔ∏è Controles</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-white mb-2">Magnitud (N)</label>
                        <div class="flex space-x-2">
                            <input type="number" id="magnitudeInput" min="0" max="200" step="0.1" value="50" 
                                   class="flex-1 p-2 border border-purple-300 rounded-lg bg-gradient-to-r from-purple-50 to-pink-50 text-center font-mono">
                            <input type="range" id="magnitude" min="10" max="100" value="50" class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <span id="magnitudeValue" class="text-sm text-gray-300">50.0 N</span>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-white mb-2">√Ångulo (¬∞)</label>
                        <div class="flex space-x-2">
                            <input type="number" id="angleInput" min="0" max="360" step="0.1" value="0" 
                                   class="flex-1 p-2 border border-purple-300 rounded-lg bg-gradient-to-r from-purple-50 to-pink-50 text-center font-mono">
                            <input type="range" id="angle" min="0" max="360" value="0" class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <span id="angleValue" class="text-sm text-gray-300">0.0¬∞</span>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-white mb-2">Color del Vector</label>
                        <select id="vectorColor" class="w-full p-2 border border-purple-300 rounded-lg bg-gradient-to-r from-purple-50 to-pink-50">
                            <option value="#ef4444">üî¥ Rojo</option>
                            <option value="#3b82f6">üîµ Azul</option>
                            <option value="#10b981">üü¢ Verde</option>
                            <option value="#f59e0b">üü° Amarillo</option>
                            <option value="#8b5cf6">üü£ Morado</option>
                            <option value="#ec4899">ü©∑ Rosa</option>
                            <option value="#a855f7">üíú Morado Claro</option>
                            <option value="#d946ef">üå∏ Fucsia</option>
                            <option value="#06b6d4">ü©µ Cian</option>
                            <option value="#84cc16">üåø Lima</option>
                            <option value="#f97316">üß° Naranja</option>
                            <option value="#6366f1">üîÆ √çndigo</option>
                        </select>
                    </div>
                    
                    <button id="addVector" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl">
                        ‚ûï Agregar Vector
                    </button>
                    
                    <button id="clearAll" class="w-full bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl">
                        üóëÔ∏è Limpiar Todo
                    </button>
                </div>
                
                <!-- Fuerzas Predefinidas -->
                <div class="mt-6 p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200">
                    <h3 class="text-lg font-semibold text-purple-800 mb-3">‚ö° Fuerzas R√°pidas</h3>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="forceTable.addQuickForce(50, 0, '#ef4444')" 
                                class="bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all duration-300 shadow-md hover:shadow-lg">
                            ‚û°Ô∏è 50N Este
                        </button>
                        <button onclick="forceTable.addQuickForce(50, 90, '#10b981')" 
                                class="bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all duration-300 shadow-md hover:shadow-lg">
                            ‚¨ÜÔ∏è 50N Norte
                        </button>
                        <button onclick="forceTable.addQuickForce(50, 180, '#8b5cf6')" 
                                class="bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all duration-300 shadow-md hover:shadow-lg">
                            ‚¨ÖÔ∏è 50N Oeste
                        </button>
                        <button onclick="forceTable.addQuickForce(50, 270, '#f59e0b')" 
                                class="bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all duration-300 shadow-md hover:shadow-lg">
                            ‚¨áÔ∏è 50N Sur
                        </button>
                    </div>
                </div>
                
                <!-- Resultados -->
                <div class="mt-6 p-4 bg-gradient-to-r from-gray-50 to-purple-50 rounded-lg border border-purple-200">
                    <h3 class="text-lg font-semibold text-white mb-2">üìä Fuerza Resultante</h3>
                    <div id="resultant" class="space-y-1 text-sm">
                        <div>Magnitud: <span id="resultMagnitude" class="font-mono">0.0 N</span></div>
                        <div>√Ångulo: <span id="resultAngle" class="font-mono">0.0¬∞</span></div>
                        <div>Fx: <span id="resultFx" class="font-mono">0.0 N</span></div>
                        <div>Fy: <span id="resultFy" class="font-mono">0.0 N</span></div>
                    </div>
                    
                    <!-- Estado de Equilibrio -->
                    <div class="mt-3 p-3 rounded-lg" id="equilibriumStatus">
                        <div class="flex items-center space-x-2">
                            <span id="equilibriumIcon" class="text-lg">‚öñÔ∏è</span>
                            <span id="equilibriumText" class="font-semibold text-sm">Sistema en Equilibrio</span>
                        </div>
                    </div>
                    
                    <!-- Recomendaci√≥n de Equilibrio -->
                    <div class="mt-3 p-4 rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 hidden" id="equilibriumRecommendation">
                        <h4 class="text-sm font-semibold text-blue-800 mb-2">üí° Recomendaci√≥n para Equilibrio</h4>
                        <p class="text-xs text-blue-700 mb-3">Para lograr el equilibrio, agrega este vector:</p>
                        <div class="text-sm text-blue-800 space-y-1 mb-3">
                            <div>Magnitud: <span id="recMagnitude" class="font-mono font-bold">0.0 N</span></div>
                            <div>√Ångulo: <span id="recAngle" class="font-mono font-bold">0.0¬∞</span></div>
                        </div>
                        <button id="addEquilibriumVector" 
                                class="w-full bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-semibold py-2 px-3 rounded-lg text-sm transition-all duration-300 shadow-md hover:shadow-lg">
                            ‚öñÔ∏è Agregar Vector de Equilibrio
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Mesa de Fuerzas -->
            <div class="lg:col-span-2 bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 rounded-xl shadow-2xl border-2 border-blue-700 p-6 backdrop-blur-sm">
                <h2 class="text-2xl font-semibold text-white mb-4">üéØ Mesa de Fuerzas</h2>
                
                <!-- Controles de Zoom -->
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center space-x-3">
                        <button id="zoomOut" class="bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-3 py-2 rounded-lg font-semibold transition-all duration-300 shadow-md hover:shadow-lg">
                            üîç‚ûñ Alejar
                        </button>
                        <span id="zoomLevel" class="text-white font-mono bg-blue-800 px-3 py-1 rounded-lg">100%</span>
                        <button id="zoomIn" class="bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-3 py-2 rounded-lg font-semibold transition-all duration-300 shadow-md hover:shadow-lg">
                            üîç‚ûï Acercar
                        </button>
                        <button id="zoomReset" class="bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-3 py-2 rounded-lg font-semibold transition-all duration-300 shadow-md hover:shadow-lg">
                            üéØ Reset
                        </button>
                    </div>
                    <div class="text-white text-sm">
                        <span>Escala: </span><span id="scaleInfo" class="font-mono">1 cuadro = 20N</span>
                    </div>
                </div>
                
                <div class="border-2 border-gray-200 rounded-lg overflow-hidden">
                    <svg id="forcePlane" width="100%" height="400" viewBox="0 0 400 400" class="bg-gray-50">
                        <!-- Definir marcadores de flecha -->
                        <defs>
                            <marker id="arrowhead" markerWidth="4" markerHeight="3" refX="3.5" refY="1.5" orient="auto" markerUnits="strokeWidth">
                                <polygon points="0 0, 4 1.5, 0 3" fill="currentColor" />
                            </marker>
                            <marker id="arrowhead-resultant" markerWidth="5" markerHeight="4" refX="4.5" refY="2" orient="auto" markerUnits="strokeWidth">
                                <polygon points="0 0, 5 2, 0 4" fill="currentColor" />
                            </marker>
                        </defs>
                        
                        <!-- Cuadr√≠cula -->
                        <g id="grid"></g>
                        
                        <!-- Ejes -->
                        <line x1="0" y1="200" x2="400" y2="200" class="axis-line" />
                        <line x1="200" y1="0" x2="200" y2="400" class="axis-line" />
                        
                        <!-- Etiquetas de ejes -->
                        <text x="390" y="195" class="text-sm fill-gray-600">+X</text>
                        <text x="205" y="15" class="text-sm fill-gray-600">+Y</text>
                        
                        <!-- Vectores -->
                        <g id="vectors"></g>
                        
                        <!-- Vector resultante -->
                        <g id="resultantVector"></g>
                    </svg>
                </div>
            </div>
        </div>
        
        <!-- Lista de Vectores -->
        <div class="mt-6 bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 rounded-xl shadow-2xl border-2 border-blue-700 p-6 backdrop-blur-sm">
            <h2 class="text-2xl font-semibold text-white mb-4">üìã Vectores Agregados</h2>
            <div id="vectorList" class="space-y-2">
                <p class="text-gray-300 italic">No hay vectores agregados a√∫n</p>
            </div>
        </div>
    </div>

    <script>
        class ForceTable {
            constructor() {
                this.vectors = [];
                this.scale = 1.5; // Escala para visualizaci√≥n
                this.centerX = 200;
                this.centerY = 200;
                this.zoomLevel = 1.0; // Nivel de zoom (1.0 = 100%)
                this.minZoom = 0.25; // Zoom m√≠nimo (25%)
                this.maxZoom = 4.0; // Zoom m√°ximo (400%)
                this.currentViewBox = { x: 0, y: 0, width: 400, height: 400 };
                
                this.initializeGrid();
                this.bindEvents();
                this.updateSliderValues();
                this.updateZoomDisplay();
            }
            
            initializeGrid() {
                const grid = document.getElementById('grid');
                // Crear cuadr√≠cula
                for (let i = 0; i <= 400; i += 20) {
                    // L√≠neas verticales
                    const vLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    vLine.setAttribute('x1', i);
                    vLine.setAttribute('y1', 0);
                    vLine.setAttribute('x2', i);
                    vLine.setAttribute('y2', 400);
                    vLine.setAttribute('class', 'grid-line');
                    grid.appendChild(vLine);
                    
                    // L√≠neas horizontales
                    const hLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    hLine.setAttribute('x1', 0);
                    hLine.setAttribute('y1', i);
                    hLine.setAttribute('x2', 400);
                    hLine.setAttribute('y2', i);
                    hLine.setAttribute('class', 'grid-line');
                    grid.appendChild(hLine);
                }
            }
            
            bindEvents() {
                // Eventos para deslizadores
                document.getElementById('magnitude').addEventListener('input', () => this.updateFromSlider('magnitude'));
                document.getElementById('angle').addEventListener('input', () => this.updateFromSlider('angle'));
                
                // Eventos para campos num√©ricos
                document.getElementById('magnitudeInput').addEventListener('input', () => this.updateFromInput('magnitude'));
                document.getElementById('angleInput').addEventListener('input', () => this.updateFromInput('angle'));
                
                // Otros eventos
                document.getElementById('addVector').addEventListener('click', () => this.addVector());
                document.getElementById('clearAll').addEventListener('click', () => this.clearAll());
                document.getElementById('addEquilibriumVector').addEventListener('click', () => this.addEquilibriumVector());
                
                // Eventos de zoom
                document.getElementById('zoomIn').addEventListener('click', () => this.zoomIn());
                document.getElementById('zoomOut').addEventListener('click', () => this.zoomOut());
                document.getElementById('zoomReset').addEventListener('click', () => this.zoomReset());
                
                // Zoom con rueda del mouse
                document.getElementById('forcePlane').addEventListener('wheel', (e) => this.handleWheelZoom(e));
            }
            
            updateSliderValues() {
                const magnitude = parseFloat(document.getElementById('magnitudeInput').value) || 0;
                const angle = parseFloat(document.getElementById('angleInput').value) || 0;
                
                document.getElementById('magnitudeValue').textContent = `${magnitude.toFixed(1)} N`;
                document.getElementById('angleValue').textContent = `${angle.toFixed(1)}¬∞`;
            }
            
            updateFromSlider(type) {
                if (type === 'magnitude') {
                    const value = document.getElementById('magnitude').value;
                    document.getElementById('magnitudeInput').value = value;
                } else if (type === 'angle') {
                    const value = document.getElementById('angle').value;
                    document.getElementById('angleInput').value = value;
                }
                this.updateSliderValues();
            }
            
            updateFromInput(type) {
                if (type === 'magnitude') {
                    const value = parseFloat(document.getElementById('magnitudeInput').value) || 0;
                    // Limitar el rango del slider si el valor est√° dentro del rango
                    if (value >= 10 && value <= 100) {
                        document.getElementById('magnitude').value = value;
                    }
                } else if (type === 'angle') {
                    const value = parseFloat(document.getElementById('angleInput').value) || 0;
                    // Normalizar el √°ngulo entre 0 y 360
                    const normalizedAngle = ((value % 360) + 360) % 360;
                    document.getElementById('angleInput').value = normalizedAngle.toFixed(1);
                    document.getElementById('angle').value = normalizedAngle;
                }
                this.updateSliderValues();
            }
            
            addVector() {
                const magnitude = parseFloat(document.getElementById('magnitudeInput').value) || 0;
                const angle = parseFloat(document.getElementById('angleInput').value) || 0;
                const color = document.getElementById('vectorColor').value;
                
                const vector = {
                    id: Date.now(),
                    magnitude: magnitude,
                    angle: angle,
                    color: color,
                    fx: magnitude * Math.cos(angle * Math.PI / 180),
                    fy: magnitude * Math.sin(angle * Math.PI / 180)
                };
                
                this.vectors.push(vector);
                this.updateDisplay();
            }
            
            clearAll() {
                this.vectors = [];
                this.updateDisplay();
            }
            
            updateDisplay() {
                this.drawVectors();
                this.calculateResultant();
                this.updateVectorList();
            }
            
            drawVectors() {
                const vectorsGroup = document.getElementById('vectors');
                vectorsGroup.innerHTML = '';
                
                // Calcular grosor de l√≠nea basado en el zoom (m√°s delgado cuando se acerca)
                const strokeWidth = Math.max(0.8, 2 / this.zoomLevel);
                const fontSize = Math.max(8, 12 / this.zoomLevel);
                
                this.vectors.forEach((vector, index) => {
                    const endX = this.centerX + (vector.fx * this.scale);
                    const endY = this.centerY - (vector.fy * this.scale); // Invertir Y para coordenadas SVG
                    
                    // Crear l√≠nea del vector
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', this.centerX);
                    line.setAttribute('y1', this.centerY);
                    line.setAttribute('x2', endX);
                    line.setAttribute('y2', endY);
                    line.setAttribute('stroke', vector.color);
                    line.setAttribute('stroke-width', strokeWidth);
                    line.setAttribute('marker-end', 'url(#arrowhead)');
                    line.setAttribute('color', vector.color);
                    
                    // Etiqueta del vector
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', endX + 5);
                    text.setAttribute('y', endY - 5);
                    text.setAttribute('font-size', fontSize);
                    text.setAttribute('font-weight', 'bold');
                    text.setAttribute('fill', vector.color);
                    text.textContent = `F${index + 1}`;
                    
                    vectorsGroup.appendChild(line);
                    vectorsGroup.appendChild(text);
                });
            }
            
            calculateResultant() {
                let totalFx = 0;
                let totalFy = 0;
                
                this.vectors.forEach(vector => {
                    totalFx += vector.fx;
                    totalFy += vector.fy;
                });
                
                const magnitude = Math.sqrt(totalFx * totalFx + totalFy * totalFy);
                const angle = Math.atan2(totalFy, totalFx) * 180 / Math.PI;
                
                // Actualizar display de resultados
                document.getElementById('resultMagnitude').textContent = `${magnitude.toFixed(1)} N`;
                document.getElementById('resultAngle').textContent = `${angle.toFixed(1)}¬∞`;
                document.getElementById('resultFx').textContent = `${totalFx.toFixed(1)} N`;
                document.getElementById('resultFy').textContent = `${totalFy.toFixed(1)} N`;
                
                // Verificar equilibrio (tolerancia de 0.5N)
                const isInEquilibrium = magnitude < 0.5;
                this.updateEquilibriumStatus(isInEquilibrium, magnitude);
                
                // Dibujar vector resultante
                this.drawResultant(totalFx, totalFy, magnitude);
            }
            
            updateEquilibriumStatus(isInEquilibrium, magnitude) {
                const statusDiv = document.getElementById('equilibriumStatus');
                const iconSpan = document.getElementById('equilibriumIcon');
                const textSpan = document.getElementById('equilibriumText');
                const recommendationDiv = document.getElementById('equilibriumRecommendation');
                
                if (this.vectors.length === 0) {
                    statusDiv.className = 'mt-3 p-3 rounded-lg bg-gradient-to-r from-gray-100 to-gray-200';
                    iconSpan.textContent = '‚öñÔ∏è';
                    textSpan.textContent = 'Sin fuerzas aplicadas';
                    textSpan.className = 'font-semibold text-sm text-gray-600';
                    recommendationDiv.classList.add('hidden');
                } else if (isInEquilibrium) {
                    statusDiv.className = 'mt-3 p-3 rounded-lg bg-gradient-to-r from-green-100 to-emerald-100 border border-green-300';
                    iconSpan.textContent = '‚úÖ';
                    textSpan.textContent = '¬°Sistema en Equilibrio!';
                    textSpan.className = 'font-semibold text-sm text-green-700';
                    recommendationDiv.classList.add('hidden');
                } else {
                    statusDiv.className = 'mt-3 p-3 rounded-lg bg-gradient-to-r from-red-100 to-pink-100 border border-red-300';
                    iconSpan.textContent = '‚ö†Ô∏è';
                    textSpan.textContent = `Sistema NO en equilibrio (${magnitude.toFixed(1)}N)`;
                    textSpan.className = 'font-semibold text-sm text-red-700';
                    
                    // Mostrar recomendaci√≥n de equilibrio
                    this.showEquilibriumRecommendation();
                }
            }
            
            drawResultant(fx, fy, magnitude) {
                const resultantGroup = document.getElementById('resultantVector');
                resultantGroup.innerHTML = '';
                
                if (magnitude > 0.1) {
                    const endX = this.centerX + (fx * this.scale);
                    const endY = this.centerY - (fy * this.scale);
                    
                    // Calcular grosor para el vector resultante (m√°s grueso que los normales)
                    const resultantStrokeWidth = Math.max(1.2, 2.5 / this.zoomLevel);
                    const resultantFontSize = Math.max(10, 14 / this.zoomLevel);
                    
                    // Vector resultante (m√°s grueso y negro)
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', this.centerX);
                    line.setAttribute('y1', this.centerY);
                    line.setAttribute('x2', endX);
                    line.setAttribute('y2', endY);
                    line.setAttribute('stroke', '#000000');
                    line.setAttribute('stroke-width', resultantStrokeWidth);
                    line.setAttribute('marker-end', 'url(#arrowhead-resultant)');
                    line.setAttribute('color', '#000000');
                    
                    // Etiqueta
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', endX + 5);
                    text.setAttribute('y', endY + 15);
                    text.setAttribute('font-size', resultantFontSize);
                    text.setAttribute('font-weight', 'bold');
                    text.setAttribute('fill', '#000000');
                    text.textContent = 'R';
                    
                    resultantGroup.appendChild(line);
                    resultantGroup.appendChild(text);
                }
            }
            
            updateVectorList() {
                const listContainer = document.getElementById('vectorList');
                
                if (this.vectors.length === 0) {
                    listContainer.innerHTML = '<p class="text-gray-300 italic">No hay vectores agregados a√∫n</p>';
                    return;
                }
                
                listContainer.innerHTML = this.vectors.map((vector, index) => `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <div class="w-4 h-4 rounded-full" style="background-color: ${vector.color}"></div>
                            <span class="font-semibold">F${index + 1}</span>
                        </div>
                        <div class="text-sm text-gray-600">
                            <span class="font-mono">${vector.magnitude}N @ ${vector.angle}¬∞</span>
                            <span class="ml-2 text-xs">
                                (${vector.fx.toFixed(1)}, ${vector.fy.toFixed(1)})
                            </span>
                        </div>
                        <button onclick="forceTable.removeVector(${vector.id})" 
                                class="bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-3 py-1 rounded-lg text-sm font-semibold transition-all duration-300 shadow-md hover:shadow-lg">
                            üóëÔ∏è Quitar
                        </button>
                    </div>
                `).join('');
            }
            
            removeVector(id) {
                this.vectors = this.vectors.filter(vector => vector.id !== id);
                this.updateDisplay();
            }
            
            showEquilibriumRecommendation() {
                const recommendationDiv = document.getElementById('equilibriumRecommendation');
                
                // Calcular la fuerza resultante actual
                let totalFx = 0;
                let totalFy = 0;
                
                this.vectors.forEach(vector => {
                    totalFx += vector.fx;
                    totalFy += vector.fy;
                });
                
                // El vector de equilibrio es el opuesto a la resultante
                const equilibriumFx = -totalFx;
                const equilibriumFy = -totalFy;
                const equilibriumMagnitude = Math.sqrt(equilibriumFx * equilibriumFx + equilibriumFy * equilibriumFy);
                const equilibriumAngle = Math.atan2(equilibriumFy, equilibriumFx) * 180 / Math.PI;
                
                // Normalizar el √°ngulo para que est√© entre 0 y 360
                const normalizedAngle = equilibriumAngle < 0 ? equilibriumAngle + 360 : equilibriumAngle;
                
                // Actualizar la interfaz
                document.getElementById('recMagnitude').textContent = `${equilibriumMagnitude.toFixed(1)} N`;
                document.getElementById('recAngle').textContent = `${normalizedAngle.toFixed(1)}¬∞`;
                
                // Mostrar la recomendaci√≥n
                recommendationDiv.classList.remove('hidden');
                
                // Guardar los valores para el bot√≥n
                this.equilibriumVector = {
                    magnitude: equilibriumMagnitude,
                    angle: normalizedAngle,
                    fx: equilibriumFx,
                    fy: equilibriumFy
                };
            }
            
            addEquilibriumVector() {
                if (this.equilibriumVector) {
                    const vector = {
                        id: Date.now(),
                        magnitude: this.equilibriumVector.magnitude,
                        angle: this.equilibriumVector.angle,
                        color: '#6366f1', // Color √≠ndigo para el vector de equilibrio
                        fx: this.equilibriumVector.fx,
                        fy: this.equilibriumVector.fy
                    };
                    
                    this.vectors.push(vector);
                    this.updateDisplay();
                }
            }
            
            addQuickForce(magnitude, angle, color) {
                const vector = {
                    id: Date.now(),
                    magnitude: magnitude,
                    angle: angle,
                    color: color,
                    fx: magnitude * Math.cos(angle * Math.PI / 180),
                    fy: magnitude * Math.sin(angle * Math.PI / 180)
                };
                
                this.vectors.push(vector);
                this.updateDisplay();
            }
            
            // Funciones de Zoom
            zoomIn() {
                if (this.zoomLevel < this.maxZoom) {
                    this.zoomLevel = Math.min(this.zoomLevel * 1.25, this.maxZoom);
                    this.updateViewBox();
                    this.updateZoomDisplay();
                    this.updateDisplay();
                }
            }
            
            zoomOut() {
                if (this.zoomLevel > this.minZoom) {
                    this.zoomLevel = Math.max(this.zoomLevel / 1.25, this.minZoom);
                    this.updateViewBox();
                    this.updateZoomDisplay();
                    this.updateDisplay();
                }
            }
            
            zoomReset() {
                this.zoomLevel = 1.0;
                this.updateViewBox();
                this.updateZoomDisplay();
                this.updateDisplay();
            }
            
            handleWheelZoom(event) {
                event.preventDefault();
                
                if (event.deltaY < 0) {
                    this.zoomIn();
                } else {
                    this.zoomOut();
                }
            }
            
            updateViewBox() {
                const svg = document.getElementById('forcePlane');
                const baseSize = 400;
                const newSize = baseSize / this.zoomLevel;
                const offset = (baseSize - newSize) / 2;
                
                this.currentViewBox = {
                    x: offset,
                    y: offset,
                    width: newSize,
                    height: newSize
                };
                
                svg.setAttribute('viewBox', `${this.currentViewBox.x} ${this.currentViewBox.y} ${this.currentViewBox.width} ${this.currentViewBox.height}`);
            }
            
            updateZoomDisplay() {
                const zoomPercentage = Math.round(this.zoomLevel * 100);
                document.getElementById('zoomLevel').textContent = `${zoomPercentage}%`;
                
                // Actualizar informaci√≥n de escala
                const gridValue = 20 / this.zoomLevel;
                document.getElementById('scaleInfo').textContent = `1 cuadro = ${gridValue.toFixed(1)}N`;
                
                // Deshabilitar botones si se alcanzan los l√≠mites
                const zoomInBtn = document.getElementById('zoomIn');
                const zoomOutBtn = document.getElementById('zoomOut');
                
                if (this.zoomLevel >= this.maxZoom) {
                    zoomInBtn.disabled = true;
                    zoomInBtn.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    zoomInBtn.disabled = false;
                    zoomInBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                }
                
                if (this.zoomLevel <= this.minZoom) {
                    zoomOutBtn.disabled = true;
                    zoomOutBtn.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    zoomOutBtn.disabled = false;
                    zoomOutBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            }
        }
        
        // Inicializar la aplicaci√≥n
        const forceTable = new ForceTable();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9804324a61fe1654',t:'MTc1ODA2NTg5Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
